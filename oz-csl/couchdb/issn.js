{
  "_id": "_design/issn",
  "_rev": "14-f0142822d5fa55fa31bc5e708fa0cd1a",
  "views": {
    "work-issn": {
      "map": "function (doc) {\n  if (doc['message-format']) {\n    if (doc['message-format'] == 'application/vnd.crossref-api-message+json') {\n\n\t    var csl = doc.message;\n\t  \n\t    if (csl['container-title']) {\n\t      var title = '';\n\t      if (Array.isArray(csl['container-title'])) {\n\t        title = csl['container-title'][0];\n\t      } else {\n\t        title = csl['container-title'];\n\t      }\n\t      \n\t      var issn = '';\n\t      \n\t      /*\n\"issn-type\": [\n      {\n        \"value\": \"0370-6583\",\n        \"type\": \"print\"\n      },\n      {\n        \"value\": \"2175-7860\",\n        \"type\": \"electronic\"\n      }\n    ]\n    */\n    \n        if (csl['issn-type']) {\n          for (var i in csl['issn-type']) {\n            if (csl['issn-type'][i].type == \"print\") {\n              issn = csl['issn-type'][i].value; \n            }\n            \n          }\n          \n        }\n\t      \n\t      if (issn == '') {\n\t        if (csl.ISSN) {\n\t          issn = csl.ISSN[0];\n\t        }\n\t      }\n\t      \n\t      if (issn != '') {\n\t        emit([title, issn], 1);\n\t        \n\t      }\n\t     \n\t    }\n    }\n  }\n}\n\n",
      "reduce": "_sum"
    },
    "citation-container-lookup": {
      "map": "\n//----------------------------------------------------------------------------------------\nfunction finger_print(s) {\n\ts = s.toLowerCase();\n\n\t// stop words\n\t// en\n\ts = s.replace(/\\bfor\\b/g, '');\n\ts = s.replace(/\\band\\b/g, '')\n\ts = s.replace(/\\bof\\b/g, '');\n\ts = s.replace(/\\bthe\\b/g, '');\n\ts = s.replace(/\\bin\\b/g, '');\n\n\t// fr\n\ts = s.replace(/\\bde\\b/g, '');\n\ts = s.replace(/\\bla\\b/g, '');\n\ts = s.replace(/\\bet\\b/g, '');\n\n\t// de\n\ts = s.replace(/\\bdas\\b/g, '');\n\ts = s.replace(/\\bder\\b/g, '');\n\ts = s.replace(/\\bfur\\b/g, '');\n\n\t// numbers\n\ts = s.replace(/\\d+/g, '');\n\n\n\t// white space\n\ts = s.replace(/\\s\\s*/g, '');\n\n\t// punctuation\n\ts = s.replace(/[\\.|,|\\'|\\(|\\)|\"|:|-|&|-]+/g, '');\n\n\treturn s;\n}\n\n\n//----------------------------------------------------------------------------------------\nfunction (doc) {\n \n\tvar x = [\n'actaamazonica',\n'actabiolparan',\n'actabotacadscihung',\n'actabotanicabrasilica',\n'actabotanicaneerlandica',\n'actabotborealoccidsin',\n'actabotbrasil',\n'actabotcroat',\n'actabotgallica',\n'actabotgallicabotlett',\n'actabothung',\n'actabotmalac',\n'actabotmex',\n'actabotneerl',\n'actabotvenez',\n'actabotyunnan',\n'actahortiberg',\n'actamanilana',\n'actaphytotaxgeobot',\n'actaphytotaxsin',\n'actasocbotpoloniae',\n'actualbiol',\n'adansonia',\n'adansoniaser',\n'adansoniasér',\n'africanjbiotech',\n'aliso',\n'allertonia',\n'alpinebot',\n'amerfernj',\n'americanfernjournal',\n'americanjournalbotany',\n'amerjbot',\n'amermidlnaturalist',\n'amerorchidsocbull',\n'analesdeljardínbotánicomadrid',\n'analesinstbiolunivnacautónméxicobot',\n'analesjardbotmadrid',\n'annalesbotanicifennici',\n'annbotfenn',\n'annbotoxford',\n'annbotrome',\n'anncarnegiemus',\n'annjardbotbuitenzorg',\n'annmagnathist',\n'annmissouribotgard',\n'annmuscolmarseille',\n'annnathist',\n'annnaturhistmuswien',\n'annnaturhistmuswienb',\n'annnewyorkacadsci',\n'annscinatbot',\n'anntransvaalmus',\n'anntsukubabotgard',\n'annuaireconservjardbotgenève',\n'aquaticbot',\n'archivmusnacriojaneiro',\n'archjardbotriojaneiro',\n'archmusnacriojaneiro',\n'arcula',\n'arkbot',\n'arkivbotstockh',\n'arnaldoa',\n'aroideana',\n'arqmusnacriojaneiro',\n'asklepios',\n'australianjournalbotany',\n'australiansystematicbotany',\n'australjbot',\n'australjbotsupplser',\n'australorchidrev',\n'australsystbot',\n'austrobaileya',\n'balduinia',\n'bangladeshjpltaxon',\n'bauhinia',\n'beitrbiolpflanzen',\n'belgjbot',\n'berdeutschbotges',\n'berschweizbotges',\n'biodiversdataj',\n'biodiversresconservation',\n'bioldiversityconservation',\n'bishopmusbullbot',\n'blumea',\n'blumeabiodiversityevolutionbiogeographyplants',\n'blumeasuppl',\n'boissiera',\n'bolbotunivsaopaulo',\n'boletimbotânica',\n'bolinstbotunivguadalajara',\n'bolmusgoeldihistnatethnogr',\n'bolmushistnattucuman',\n'bolmusparaenseemiliogoeldinsbot',\n'bolsocbotméx',\n'bolsocbotméxico',\n'bonplandiacorrientes',\n'bostonjnathist',\n'botanicaljournallinneansociety',\n'botanicalmagazinetokyo',\n'botbullacadsin',\n'botbullacadsintaipei',\n'botgaz',\n'bothalia',\n'bothelv',\n'botjahrbsyst',\n'botjlinnsoc',\n'botmag',\n'botmagkewmag',\n'botmagtokyo',\n'botmusleafl',\n'botnot',\n'botrevlancaster',\n'botsci',\n'botstudtaipei',\n'bottidsskr',\n'botzhurnmoscowleningrad',\n'bouteloua',\n'bradea',\n'bradleya',\n'britferngaz',\n'brittonia',\n'brunonia',\n'bullbimenssoclinnlyon',\n'bullbotresharbin',\n'bullbotsurvindia',\n'bullbritmusnathistbot',\n'bulletinmiscellaneousinformationkewadditionalseriesnewgeneraspeciescyperaceae',\n'bulletinmiscellaneousinformationroyalgardenskew',\n'bulletinsoci?t?botaniquefrance',\n'bullherbboissier',\n'bulljardbotbuitenzorg',\n'bulljardbotnatlbelg',\n'bulljardbotétatbruxelles',\n'bullmenssoclinnlyon',\n'bullmenssoclinnparis',\n'bullmiscinformkew',\n'bullmiscinformkewadditser',\n'bullmushistnatparis',\n'bullmusnationhistnatparis',\n'bullmusnatlhistnat',\n'bullmusnatlhistnatbadansonia',\n'bullnathistmuslondonbot',\n'bullnatlmusnatscitokyob',\n'bullnewyorkbotgard',\n'bullsocbotfrance',\n'bullsocbotfrancelettbot',\n'bullsoclinnparis',\n'bullsocneuchâteloisescinat',\n'bullsocroybotbelgique',\n'bulltorreybotclub',\n'bunrui',\n'butinstcatalanahistnat',\n'cactsuccjlosangeles',\n'cactsucmex',\n'caldasia',\n'canadjbot',\n'candollea',\n'carnifloraaustralis',\n'carnivplnewslett',\n'castanea',\n'ceiba',\n'cienciamexico',\n'cladistics',\n'collectaneabotanica',\n'collectbotbarcelona',\n'contrbiollabkyotouniv',\n'contrgrayherb',\n'contribherbaustral',\n'contribqueenslherb',\n'contributionsfromherbariumaustraliense',\n'contributionsfromqueenslandherbarium',\n'contrunivmichiganherb',\n'contrusnatlherb',\n'curtissbotanicalmagazine',\n'curtissbotanicalmagazineappendixcompaniontobotanicalmagazine',\n'curtissbotanicalmagazinenewseries',\n'curtissbotanicalmagazinens',\n'curtissbotmag',\n'danskbotark',\n'darwiniana',\n'edinburghjbot',\n'edinburghjournalbotany',\n'eurjtaxon',\n'feddesrepert',\n'femsyeastresearch',\n'ferngaz',\n'ferngazuk',\n'fieldianabot',\n'flcongobelgeruandaurundi',\n'flmalesserspermat',\n'flneotropmonogr',\n'floramontiber',\n'foliageobotphytotax',\n'foliamalaysiana',\n'fontqueria',\n'forumgeobot',\n'fritschiana',\n'fungaldiversity',\n'gardbullsingapore',\n'gardensbulletinsingapore',\n'gardensbulletinsingaporemaywlchewflaustralia',\n'gartenflora',\n'gayana',\n'gayanabot',\n'gayanabotánica',\n'genetica',\n'genschefflerasabah',\n'globalfl',\n'grana',\n'greatbasinnaturalist',\n'guihaia',\n'harvardpapbot',\n'harvardpapersbotany',\n'haseltonia',\n'hoehnea',\n'ibugana',\n'iheringiabot',\n'intjplsci',\n'jadelaidebotgard',\n'jagrictropbotappl',\n'jarnoldarbor',\n'jassocstraits',\n'jbamboores',\n'jbiogeogr',\n'jbombaynathistsoc',\n'jbotresinsttexas',\n'jbotsocbotfrance',\n'jeafrnathist',\n'jgeobot',\n'jgeobothokuriku',\n'jintconiferpreservsoc',\n'jjapbot',\n'jlinnsocbot',\n'jnanjingforestunivnatscied',\n'journagrictropbotappliq',\n'journaladelaidebotanicgardens',\n'journallinneansocietybotany',\n'journalroyalsocietywesternaustralia',\n'journalwashingtonacademysciences',\n'journjapbot',\n'jproclinnsocbot',\n'jroysocwesternaustralia',\n'jsafricanbot',\n'jstraitsbranchroyasiatsoc',\n'jsystevol',\n'jthreattaxa',\n'jtropsubtropbot',\n'jwashacadsci',\n'jwuhanbotres',\n'kalikasan',\n'kalmia',\n'kanunnah',\n'kewbull',\n'kewbulletin',\n'kirkia',\n'komarovia',\n'koreanjpltaxon',\n'lankesteriana',\n'lichenologist',\n'lindleyana',\n'lundellia',\n'madroño',\n'malayannatj',\n'mededbotmusherbrijksunivutrecht',\n'memamacadartssc',\n'memameracad',\n'memameracadarts',\n'memameracadartsser',\n'memjuntainvestultramarser',\n'memmushistnatparisserbot',\n'memnamacadartssc',\n'memnewyorkbotgard',\n'memoirsamericanacademyartssciences',\n'memoirsamericanacademyartssciencesser',\n'memoirsamericanacademysciences',\n'memoirstorreybotanicalclub',\n'memtorreybotclub',\n'micronesica',\n'mittbotstaatssammlmünchen',\n'molecphylogenevol',\n'monogrsystbotmissouribotgard',\n'moscosoa',\n'muelleria',\n'métecolsist',\n'nathistbullsiamsoc',\n'nelumbo',\n'neodiversity',\n'newjbot',\n'newzealandjbot',\n'newzealandjournalbotany',\n'nordicjbot',\n'nordicjournalbotany',\n'norwegjbot',\n'notesroybotgardedinburgh',\n'notizblbotgartberlindahlem',\n'notizblköniglbotgartberlin',\n'notulsystparis',\n'nouvarchmushistnat',\n'novon',\n'novostisistvysshrast',\n'nuytsia',\n'occaspapcalifacadsci',\n'oesterrbotwochenbl',\n'oesterrbotz',\n'operabot',\n'organismsdiversityevol',\n'orquideologia',\n'pacificsci',\n'parazitologiya',\n'philippjsci',\n'philippjscic',\n'philippscientist',\n'philtransroysoclondserb',\n'phytokeys',\n'phytologia',\n'phytoneuron',\n'phytonhorn',\n'phytotaxa',\n'plants[basel]',\n'plbiosystems',\n'pldiversevol',\n'pldiversityresources',\n'plecolevol',\n'plosone',\n'plosonee[oct][epublished]',\n'plscij',\n'plsystevol',\n'polishbotj',\n'procacadnatsciphiladelphia',\n'procameracadarts',\n'procamerphilossoc',\n'procbiolsocwashington',\n'proccalifacadsci',\n'proceedingslinneansocietynewsouthwales',\n'proclinnsocnewsouthwales',\n'procroysocedinb',\n'procroysocqueensland',\n'publfieldcolumbianmusbotser',\n'publfieldcolumbmusbotser',\n'publfieldmusnathistbotser',\n'pyrexjbiodiversconservation',\n'recaucklandinstmus',\n'recaucklinstmus',\n'recueiltravbotnéerl',\n'reinwardtia',\n'repertoriumnovarumspecierumregnivegetabilis',\n'repertspecnovregniveg',\n'repertspecnovregnivegbeih',\n'revbotapplagrictrop',\n'revfacagronmaracay',\n'revintbotapplagrictrop',\n'revistaacadcolombciexact',\n'revistabrasilbot',\n'revistafacagronmaracay',\n'revistaguatemal',\n'revistaguatemalensis',\n'revistajardbotnacunivhabana',\n'revistamexbiodivers',\n'revistamusplata',\n'revistamusplataseccbot',\n'revistaperubiol',\n'revistasocbolivbot',\n'revjardbotnacionunivhabana',\n'rheedea',\n'rhodora',\n'richardiana',\n'richardianans',\n'rodriguésia',\n'safricanjbot',\n'sarawakmusj',\n'sarawakmusjourn',\n'schlechtendalia',\n'schütziana',\n'selbyana',\n'sendtnera',\n'sida',\n'sidabotmisc',\n'smithsoniancontrbot',\n'smithsoniancontributionstobotany',\n'smithsonianmisccollect',\n'southwnaturalist',\n'stapfia',\n'svenskbottidskr',\n'systbot',\n'systbotmonogr',\n'systematicbotany',\n'systgeogrpl',\n'taiwania',\n'tapchísinhhọc',\n'taprobanica',\n'taxon',\n'taxonomania',\n'telopea',\n'thaiforestbullbot',\n'transactionsproceedingsroyalsocietysouthaustralia',\n'transbotsocedinburgh',\n'translinnsoclondon',\n'translinnsoclondonbot',\n'transprocbotsocedin',\n'transprocbotsocedinb',\n'transprocbotsocedinburgh',\n'transprocroysocsaustral',\n'transprocroysocsouthaustralia',\n'transroysocsouthafrica',\n'transsafricanphilossoc',\n'transsandiegosocnathist',\n'turczaninowia',\n'turkishjbot',\n'ukrayinskbotzhurn',\n'utafiti',\n'verhandlungenkaiserlichk?niglichenzoologischbotanischengesellschaftwien',\n'verhandlungenzoologischbotanischengesellschaftwien',\n'verhbotvereinsprovbrandenburg',\n'verhkkzoolbotgeswien',\n'verhzoolbotges',\n'verhzoolbotgeswien',\n'verhzoolbotgesösterr',\n'verhzoolbotgesösterreich',\n'victoriannaturalist',\n'vierteljahrsschrnaturfgeszürich',\n'watsonia',\n'webbia',\n'weberbauerella',\n'wentia',\n'willdenowia',\n'wrightia',\n'wulfenia',\n'yearbookheathersoc',\n'znaturfc',\n'菌物学报',\n];\n  \n  \n  if (doc['message-format']) {\n    if (doc['message-format'] == 'application/vnd.crossref-api-message+json') {\n\n\t  var csl = doc.message;\n  \n\t\tif (csl.reference) {\n\t\t  var n = Math.max(10, csl.reference.length);\n\t\t  for (var i = 0; i < n; i++) {\n\t\t\tif (csl.reference[i]['journal-title']) {\n\t\t\t  \n\t\t\t    var text = csl.reference[i]['journal-title'];\n\t\t\t  \tvar key = finger_print(text);\n\t\t\t  \t\n\t\t\t  \tif (key.length > 5) {\n\t\n\t          //emit(key, text);\n\t          \n\t          if (x.indexOf(key) === -1) {\n\t            //emit(key, text);\n\t          } else {\n\t            // found an exact match\n\t            emit(key, text);\n\t          }\n\t\n        \t\n\t\t\t  \t}\n\t\t\t \n\t\t\t}\n\t\t  }\n\t\t\n\t  }\n\t}\t\n  }\n}\n\n"
    }
  },
  "language": "javascript"
}
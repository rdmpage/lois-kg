{"_id":"_design/people","_rev":"7-ec33a122420019438fbef7462789430e","views":{"orcid":{"map":"function(doc) {\n    if (doc['message-format']) {\n        if (doc['message-format'] == 'application/vnd.crossref-api-message+json') {\n            // citations\n            for (var i in doc.message.author) {\n                if (doc.message.author[i].ORCID) {\n                    emit(doc.message.author[i].ORCID.replace(/https?:\\/\\/orcid.org\\//, ''), 1);\n                }\n            }\n        }\n\n        if (doc['message-format'] == 'application/vnd.citationstyles.csl+json') {\n            if (doc.message.DOI) {\n                for (var i in doc.message.author) {\n                    if (doc.message.author[i].ORCID) {\n                        // ignore cases where author is actually all the authors\n                        var go = true;\n                        if (doc.message.author[i].literal.match(/ and /)) {\n                            go = false;\n                        }\n                        if (go) {\n                            emit(doc.message.author[i].ORCID, 1);\n                        }\n                    }\n                }\n            }\n        }\n\n    }\n}","reduce":"_sum"},"family-given":{"map":"function(doc) {\n    if (doc['message-format']) {\n        if (doc['message-format'] == 'application/vnd.crossref-api-message+json') {\n\n            var csl = doc.message;\n            if (csl.author) {\n                for (var j in csl.author) {\n                    if (csl.author[j].family && csl.author[j].given) {\n                        emit([csl.author[j].family, csl.author[j].given], 1);\n                    }\n                }\n            }\n        }\n    }\n}","reduce":"_sum"},"language-pairs":{"map":"\nfunction(doc) {\n    if (doc['message-format']) {\n        if (doc['message-format'] == 'application/vnd.crossref-api-message+json') {\n            if (doc.message.author) {\n                for (var j in doc.message.author) {\n                    if (doc.message.author[j].multi) {\n                        for (var k in doc.message.author[j].multi._key) {\n                            switch (k) {\n                                case 'literal':\n                                    for (var x in doc.message.author[j].multi._key[k]) {\n                                        for (var y in doc.message.author[j].multi._key[k]) {\n                                            if (x != y) {\n                                                emit(doc.message.author[j].multi._key[k][x], doc.message.author[j].multi._key[k][y]);\n                                            }\n                                        }\n                                    }\n                                    break;\n\n                                default:\n                                    break;\n                            }\n                        }\n\n\n                    }\n                }\n            }\n        }\n    }\n}"}},"language":"javascript"}

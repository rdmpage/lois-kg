{"_id":"_design/sequence","_rev":"17-f44d2546567637cb9dea601f4ad184dc","lists":{"values":"function(head,req) { var row; start({ 'headers': { 'Content-Type': 'text/plain' } }); while(row = getRow()) { send(row.value); } }"},"views":{"fasta":{"map":"function (doc) {\n  if (doc.sequence) {\n    var fasta = \">\" + doc._id + \"\\n\";\n    \n    var chunks = doc.sequence.match(/.{1,60}/g);\n    fasta += chunks.join(\"\\n\");    \n    fasta += \"\\n\";\n    emit(doc._id, fasta);\n  }\n}"},"marker":{"map":"function (doc) {\n  if (doc.sequence) {\n    if (doc.gene) {\n      for (var i in doc.gene) {\n        emit(doc.gene[i], 1);\n      }\n    }\n  }\n}","reduce":"_sum"},"matK-fasta":{"map":"function (doc) {\n  if (doc.sequence) {\n    var key = [];\n    var taxon = doc.lineage[doc.lineage.length - 1];\n    key.push(taxon);\n    key.push(doc.organism);\n    \n    if (doc.gene.indexOf('matK') != -1) {\n      var fasta = \">\" + doc._id + '|' + doc.organism + \"\\n\";\n      var chunks = doc.sequence.match(/.{1,60}/g);\n      fasta += chunks.join(\"\\n\");    \n      fasta += \"\\n\\n\";\n      \n       emit(taxon, fasta);\n    }\n  }\n}"},"matK":{"map":"\nfunction (doc) {\n  if (doc.sequence) {\n    \n    var output = {};\n    output.id = doc._id;\n    output.label = doc.organism;\n    \n    output.sequence = doc.sequence;\n    output.sequence = output.sequence.replace(/^(a|c|g|t)/, '');\n    output.sequence = output.sequence.toUpperCase();\n\n    var taxon = doc.lineage[doc.lineage.length - 1];\n    \n    if (doc.gene.indexOf('matK') != -1) {\n        emit(taxon, output);\n    }\n  }\n}"}},"language":"javascript"}
